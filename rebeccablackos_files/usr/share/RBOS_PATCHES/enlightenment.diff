diff --git a/configure.ac b/configure.ac
index c9e24d2..a2bb930 100644
--- a/configure.ac
+++ b/configure.ac
@@ -776,15 +776,13 @@ AC_ARG_ENABLE([wayland-egl],
 AC_MSG_CHECKING([whether wayland EGL support is enabled])
 AC_MSG_RESULT([${e_cv_want_wayland_egl}])
 
-if test "x${e_cv_want_wayland_only}" != "xno" ;then
-  PKG_CHECK_MODULES([WAYLAND], [ecore-wayland wayland-server >= 1.8.0 xkbcommon uuid],
-    [
-      have_wayland=yes
-      AC_DEFINE_UNQUOTED([HAVE_WAYLAND],[1],[enable wayland support])
-    ])
-else
-  have_wayland=no
-fi
+
+PKG_CHECK_MODULES([WAYLAND], [ecore-wayland wayland-server >= 1.8.0 xkbcommon uuid],
+  [
+    have_wayland=yes
+    AC_DEFINE_UNQUOTED([HAVE_WAYLAND],[1],[enable wayland support])
+  ])
+
 
 if test "x${have_wayland}" = "xyes"; then
   if test "x${e_cv_want_wayland_egl}" != "xno";then
@@ -818,10 +816,10 @@ fi
 
 define([CHECK_MODULE_WL_X11],
 [
-  if test "x${have_wayland_only}" = "xyes" ; then
+  if test "x${have_wayland}" = "xyes" ; then
     PKG_CHECK_MODULES([ECORE_X], [ecore-x >= ${efl_version}])
   fi
-  if test "x${have_wayland_only}" = "xyes"; then
+  if test "x${have_wayland}" = "xyes"; then
     AC_E_CHECK_PKG(WL_X11, [ ecore-x >= ${efl_version} ], [WL_X11=true], [WL_X11=false])
   else
     WL_X11=false
@@ -831,7 +829,7 @@ AM_CONDITIONAL([HAVE_WL_X11], [test "x${WL_X11}" = "xtrue"])
 
 define([CHECK_MODULE_WL_DESKTOP_SHELL],
 [
-  if test "x${e_cv_want_wayland_only}" = "xyes"; then
+  if test "x${have_wayland}" = "xyes"; then
     AC_E_CHECK_PKG(WL_DESKTOP_SHELL, [ ecore >= $efl_version eina >= $efl_version ], [WL_DESKTOP_SHELL=true], [WL_DESKTOP_SHELL=false])
   else
     WL_DESKTOP_SHELL=false
@@ -841,7 +839,7 @@ AM_CONDITIONAL([HAVE_WL_DESKTOP_SHELL], [test "x${WL_DESKTOP_SHELL}" = "xtrue"])
 
 define([CHECK_MODULE_WL_FB],
 [
-  if test "x${e_cv_want_wayland_only}" = "xyes"; then
+  if test "x${have_wayland}" = "xyes"; then
     AC_E_CHECK_PKG(WL_FB, [ ecore-fb >= $efl_version ecore >= $efl_version eina >= $efl_version ], [WL_FB=true], [WL_FB=false])
   else
     WL_FB=false
@@ -861,7 +859,7 @@ AM_CONDITIONAL([HAVE_WL_DRM], [test "x${WL_DRM}" = "xtrue"])
 
 define([CHECK_MODULE_XWAYLAND],
 [
-  if test "x${e_cv_want_wayland_only}" = "xyes"; then
+  if test "x${have_wayland}" = "xyes"; then
     AC_E_CHECK_PKG(XWAYLAND, [ ecore >= $efl_version eina >= $efl_version xcb xcb-xfixes xcb-composite xcursor ], [HAVE_XWAYLAND_DEPS=true], [HAVE_XWAYLAND_DEPS=false])
     AC_PATH_PROG([XWAYLAND_BIN], [Xwayland], [false])
   else
diff --git a/src/modules/wl_x11/e_mod_main.c b/src/modules/wl_x11/e_mod_main.c
index 433601d..df6cb6c 100644
--- a/src/modules/wl_x11/e_mod_main.c
+++ b/src/modules/wl_x11/e_mod_main.c
@@ -14,7 +14,7 @@ _cb_delete_request(Ecore_Evas *ee EINA_UNUSED)
 static Eina_Bool 
 _cb_keymap_changed(void *data, int type EINA_UNUSED, void *event EINA_UNUSED)
 {
-   E_Comp_Data *cdata;
+   E_Comp_Wl_Data *cdata;
    E_Config_XKB_Layout *ekbd;
    char *rules = NULL, *model = NULL, *layout = NULL;
    Ecore_X_Atom xkb = 0;
