#! /bin/bash
#    Copyright (c) 2012, 2013, 2014 nerdopolis (or n3rdopolis) <bluescreen_avenger@verzion.net>
#
#    This file is part of RebeccaBlackLinux.
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU General Public License as published by
#    the Free Software Foundation, either version 2 of the License, or
#    (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU General Public License for more details.
#
#    You should have received a copy of the GNU General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#Create build variables

argument=$1


if [[ -z $INSTALLDIR ]]
then
  export INSTALLDIR=/opt
fi
 
echo "kf5umbrella
kitemmodels
kitemviews
kplotting
threadweaver
kcodecs
kguiaddons
kidletime
kwidgetsaddons
sonnet
kconfig
kwindowsystem
solid
kglobalaccel
karchive
kdbusaddons
kcoreaddons
kjs
kimageformats
kauth
kcrash
kjobwidgets
knotifications
kcompletion
ki18n
kdoctools
kdnssd-framework
kwallet-framework
kconfigwidgets
kservice
kiconthemes
kpty
kemoticons
kdesu
ktextwidgets
kxmlgui
kbookmarks
kcmutils
kio
kdesignerplugin
knewstuff
kparts
kdeclarative
kinit
kded
knotifyconfig
kprintutils
kunitconversion
kjsembed
kross
kmediaplayer
kdewebkit
ktexteditor
kapidox
frameworkintegration
kde4support
kfileaudiopreview
khtml
" | awk -F "#" '{print $1}' | while read BUILDNAME
do

  #compile_all is running to download the source
  if [[ "$argument" == download-only ]]
  then
    echo "Downloading/updating $BUILDNAME source"
    "/usr/bin/Compile/kdeframeworks/$BUILDNAME" download-only 2>&1 
  fi

  #compile_all is running to build the source
  if [[ "$argument" == build-only ]]
  then
    echo "building $BUILDNAME"
    "/usr/bin/Compile/kdeframeworks/$BUILDNAME" build-only 2>&1
  fi

  #compile_all is running to download and build
  if [[ ! -n "$argument" ]]
  then
    "/usr/bin/Compile/kdeframeworks/$BUILDNAME"
  fi

done